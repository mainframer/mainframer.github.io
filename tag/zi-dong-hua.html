<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>Modern Mainframer - 自动化</title>

    <link rel="stylesheet" href="http://mainframer.github.io/theme/css/normalize.css" />
    <link rel="stylesheet" href="http://mainframer.github.io/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="http://mainframer.github.io/theme/css/style.css" />
    <link rel="stylesheet" href="http://mainframer.github.io/theme/css/pygments.css" />	
    <script src="http://mainframer.github.io/theme/js/modernizr.js"></script>
</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="http://mainframer.github.io">Modern Mainframer</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
        
        

            <article>
                <a href="http://mainframer.github.io/articles/Python做自动化项目的总结.html"><h3 class="article-title">Python做自动化项目的总结</h3></a>
<h6 class="subheader" title="2014-11-05T00:00:00">2014-11-05
</h6>


<p>最近项目上有自动化要求，我选择了用Python，对自己的代码能力提高很有帮助。
- 第一：学东西最快最有效的方法是“用起来”。<br />
- 第二：通过将实际问题细分力度，用Python逐一解决，这样学到的知识掌握的深。<br />
- 第三：不要忘了归纳总结，网上信息泛滥，有个地方能记录你的学习进度和学习心得，对IT从业人员是必要的技能。  </p>
<p>心灵鸡汤说完了，这里我记录一下这次项目中用到的Python知识点和重点。</p>
<h6>Python如何中途退出一个函数？</h6>
<p><code>sys.exit(0)</code>   </p>
<h6>Python如何判断文件(夹)存在?</h6>
<p><code>os.path.exists(root_dir)</code>  </p>
<h6>Python如何改变目录?</h6>
<p><code>os.chdir(new_path)</code></p>
<h6>Python如何延时？</h6>
<p><code>time.sleep(30)</code></p>
<h6>Python如何执行系统命令？</h6>
<p><code>os.system('mycommand.bat')</code></p>
<h6>Python如何判断文件扩展名？</h6>
<p><code>file.endswith(".html")</code></p>
<h5>Python如何清空一个文件夹？</h5>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">clean_dir</span><span class="p">(</span><span class="n">root_dir</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function: Clean up an directory</span>
<span class="sd">    @root_dir: the directory you want to clean up.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">root_dir</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;directory not exists, please check&quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">root_dir</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">clean_dir</span><span class="p">(</span><span class="s">&quot;/Users/Heros/sample1&quot;</span><span class="p">)</span>
</pre></div>


<h5>Python如何得到一个文件夹下最新的那个文件夹？</h5>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">get_latest_result_folder</span><span class="p">(</span><span class="n">root_path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function:Used to get the most recent generated folder name</span>
<span class="sd">    @root_path: where the reports stored.</span>
<span class="sd">    @return: return the most latest folder name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">root_path</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">l</span><span class="p">:</span>   <span class="c"># if folder is not empty</span>
        <span class="n">l</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">fn</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">base_dir</span><span class="o">+</span><span class="n">fn</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="o">+</span><span class="n">fn</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;root folder is empty,please check.&quot;</span>
</pre></div><p class="subheader">Category: <a href="http://mainframer.github.io/category/xie-xie-jiao-ben.html">写写脚本</a>

    Tagged: 
    <a href="http://mainframer.github.io/tag/python.html">Python </a>
    <a href="http://mainframer.github.io/tag/zi-dong-hua.html">自动化 </a>
</p>



<p><a href="http://mainframer.github.io/articles/Python做自动化项目的总结.html#disqus_thread">comments</a></p>            </article>

<div class="pagination-centered">
<h6 class="subheader">Page 1 of 1</h6>

<p>

</p>
</div>



            <!-- /#posts-list -->

    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="http://mainframer.github.io/archives.html">Archives</a>
            <li><a href="http://mainframer.github.io/tags.html">Tags</a>
        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="http://mainframer.github.io/category/linuxunixuss.html">Linux/Unix/USS</a></li>
            <li><a href="http://mainframer.github.io/category/mainframe.html">Mainframe</a></li>
            <li><a href="http://mainframer.github.io/category/others.html">Others</a></li>
            <li><a href="http://mainframer.github.io/category/xie-xie-jiao-ben.html">写写脚本</a></li>
            <li><a href="http://mainframer.github.io/category/zuo-zuo-zi-dong-hua.html">做做自动化</a></li>
   
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="http://www-01.ibm.com/support/knowledgecenter">IBM知识中心</a></li>
        </ul>
		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="https://github.com/mainframer">mainframer@Github</a></li>
            <li><a href="https://www.linkedin.com/in/mainframer">mainframer@Linkedin</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
              <!--                  <p>Modern Mainframer by mainframer</p> -->
            </div>
            </div>
    </div>
</footer>
</body>
</html>