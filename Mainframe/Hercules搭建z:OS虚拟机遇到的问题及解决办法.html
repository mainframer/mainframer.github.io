
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hercules搭建z/OS虚拟机遇到的问题及解决办法 - MainframeR Everyday</title>
  <meta name="author" content="妈我回来了">

  
  <meta name="description" content="初学，在windows上搭建z/OS虚拟机，遇到不少问题，找到解决方法，记在这里。 PCOMM每次都提示打印，怎么去掉这个烦人的窗口？ 解决办法： PCOMM去掉每次连接提示打印的烦人窗口的方法：在D:\SOFTWARE\IBMPCOMM\private\*.ws文件里面添加： 1
2
3
4
[ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.flyuphigh.com/Mainframe/Hercules%E6%90%AD%E5%BB%BAz%3AOS%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="MainframeR Everyday" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34673316-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">MainframeR Everyday</a></h1>
  
    <h2>a big big iron, a big big world.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.flyuphigh.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/pictures">Pictures</a></li>
  <li><a href="/download">Download</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Hercules搭建z/OS虚拟机遇到的问题及解决办法</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-14T00:00:00+08:00" pubdate data-updated="true">Aug 14<span>th</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>初学，在windows上搭建z/OS虚拟机，遇到不少问题，找到解决方法，记在这里。</p>

<h4>PCOMM每次都提示打印，怎么去掉这个烦人的窗口？</h4>

<h4>解决办法：</h4>

<p>PCOMM去掉每次连接提示打印的烦人窗口的方法：在<code>D:\SOFTWARE\IBMPCOMM\private\*.ws</code>文件里面添加：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="no">LT</span><span class="o">]</span>
</span><span class='line'><span class="no">IgnoreWCCStartPrint</span><span class="o">=</span><span class="n">Y</span>
</span><span class='line'><span class="no">UndefinedCode</span><span class="o">=</span><span class="n">Y</span>
</span><span class='line'><span class="no">UndefinedDBCSChar</span><span class="o">=</span><span class="n">Y</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<!--more-->


<h3>如何为每一个磁盘建立shadow？</h3>

<h3>解决办法：</h3>

<p>比如：<code>sf+0A80</code>:  为设备号为0A80的设备建立shadow (设备号只是个临时的概念)</p>

<hr />

<h4>IEE038E AMOUNT OF EXPANDED STORAGE EXCEEDS 0G MAXIMUM</h4>

<p><img src="/images/zosmoni_1.png" alt="1" /></p>

<h4>解决办法：</h4>

<p>在zOS1.9.cnf配置文件中删掉下面一行即可：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>        <span class="no">XPNDSIZE</span>  <span class="mi">6</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3><code>HHCLC042E Port 00: Read error: Bad file descriptor</code></h3>

<p>HerculesGUI界面一直提示 <code>HHCLC042E Port 00: Read error: Bad file descriptor</code> 并且MVS主控台端有几行大红字：<br/>
<img src="/images/zosmoni_2.png" alt="1" /></p>

<h3>解决办法：</h3>

<p>一直提示是老版本CTCI的bug，不用管。或者下载最新版的CTCI。</p>

<hr />

<h3>MVS主控台端出现大红字</h3>

<p><img src="/images/zosmoni_3.png" alt="1" /></p>

<h3>解决办法：</h3>

<p>等待，取决你机器速度。
 + 绿色信息代表正常
 + 红色的表示有错误或者警告
 + 白色的信息如果有一个编号</p>

<hr />

<h3>错误<code>IRA200E AUXILIARY STORAGE SHORTAGE</code></h3>

<p><img src="/images/zosmoni_4.png" alt="1" /></p>

<h3>解决办法：</h3>

<p><code>OS/390</code>自动记录硬件 (和某些软件) 的错误数据和一些统计数据于PDS <code>SYS1.LOGREC</code>中，最终此数据集会被装满数据，系统会在 <em>CONSOLE</em> 上发一条信息。
使用下述作业会打印 LOGREC 中的简要信息，同时会清空 <code>SYS1.LOGREC</code> 数据集：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">...</span>
</span><span class='line'><span class="o">//</span><span class="n">STEP1</span>   <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IFCEREP1</span><span class="p">,</span><span class="n">PARM</span><span class="o">=</span><span class="s">&#39;CARD&#39;</span>
</span><span class='line'><span class="o">//</span><span class="n">SERLOG</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SYS1</span><span class="o">.</span><span class="n">LOGREC</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">OLD</span>
</span><span class='line'><span class="o">//</span><span class="n">ACCDEV</span> <span class="n">DD</span> <span class="n">DUMMY</span>
</span><span class='line'><span class="o">//</span><span class="n">EREPPT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
</span><span class='line'><span class="o">//</span><span class="n">TOURIST</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
</span><span class='line'><span class="o">//</span><span class="n">SYSIN</span> <span class="n">DD</span> <span class="o">*</span>
</span><span class='line'><span class="n">SYSUM</span>
</span><span class='line'><span class="n">ACC</span><span class="o">=</span><span class="n">Y</span>
</span><span class='line'><span class="n">ZERO</span><span class="o">=</span><span class="n">Y</span>
</span><span class='line'><span class="o">/*</span>
</span></code></pre></td></tr></table></div></figure>


<p>参照原链接：<a href="http://blog.sina.com.cn/s/blog_6c45bc400100x1uf.html">http://blog.sina.com.cn/s/blog_6c45bc400100x1uf.html</a></p>

<hr />

<h3>如何规范地正常关闭大机虚拟机？</h3>

<h3>解决办法：</h3>

<p>完整的停机，在停止VTAM之前, 要先停掉DB2，CICS等作业：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">C</span> <span class="n">CICSA</span>
</span><span class='line'><span class="o">-</span><span class="n">DB8G</span> <span class="n">STOP</span> <span class="n">DB2</span>
</span><span class='line'><span class="o">%</span><span class="n">CSQ1</span> <span class="n">STOP</span> <span class="n">QMGR</span>
</span><span class='line'><span class="n">F</span> <span class="n">DLF</span><span class="p">,</span><span class="n">MODE</span><span class="o">=</span><span class="n">DRAIN</span>
</span><span class='line'><span class="n">P</span> <span class="n">DLF</span>
</span></code></pre></td></tr></table></div></figure>


<p>先使用下面的命令停掉一般的任务：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">S</span> <span class="n">SHUTDOWN</span>
</span></code></pre></td></tr></table></div></figure>


<p>使用<code>D A,L</code>确认仍然在运行的任务，不记得是不是VTAM是否会自动停掉，如果没有，使用下面的命令：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">Z</span> <span class="n">NET</span><span class="p">,</span><span class="n">QUICK</span>
</span></code></pre></td></tr></table></div></figure>


<p>最后使用下面的命令停掉JES2：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="err">$</span><span class="n">P</span> <span class="n">JES2</span><span class="p">,</span><span class="n">TERM</span>
</span></code></pre></td></tr></table></div></figure>


<p>之后在<code>Hercules</code>上输入<code>STOP</code>停止模拟机。
之后,可以使用下面的几个命令： <br/>
<em>1、</em> 输入<code>EXIT</code>退出Hercules, 可能要等一会儿。 <br/>
<em>2、</em> 输入<code>LOADPARM</code>来改变IPL 参数，以便以不同的配置重新起动系统。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">LOADPARM</span> <span class="mi">0</span><span class="n">A82ACM1</span>
</span></code></pre></td></tr></table></div></figure>


<p>
<em>3、</em> 使用命令<code>IPL A80</code>来重新启动系统。  <br/>
你的3270仿真软件(MVS Console)应该不需要重新连接。</p>

<hr />

<h3>输入命令<code>L CICS</code>欲登陆CICS出现错误:<code>LCL701 UNABLE TO ESTABLISH SESSION - INIT SELF FAILED WITH SENSE 08570002</code></h3>

<h3>解决办法：</h3>

<p>要正常登录，三个软件必须正常运行：<code>JES2</code>,<code>VTAM</code>和<code>TSO</code>,多半原因是因为<code>VTAM</code>还没正常启动好。只需等待一会儿问题解决。(<code>LCL701</code>为<code>VTAM</code>终端编号)</p>

<hr />

<h3>TSO默认USER/PASS</h3>

<p>（0A82CSM1登陆TSO可以，CICS不行；0A82ACM1反之)</p>

<h5>默认用户　　　   密码　　　        权限</h5>

<ul>
<li>ADCDMST -         SYS1 or ADCDMST  - (RACF special authority)</li>
<li>IBMUSER  -        SYS1 or IBMUSER  - (RACF special authority)</li>
<li>SYSADM   -        SYS1 or SYSADM   - (DB2 and RACF special auth)</li>
<li>SYSOPR   -        SYS1 or SYSOPR   - (DB2 and RACF special auth)</li>
<li>ADCDA ~ ADCDZ -    TEST</li>
<li>WEBADM        -   WEBADM</li>
<li>OPEN1 - OPEN3 -    SYS1<br/>
<img src="/images/zosmoni_5.png" alt="1" /></li>
</ul>


<hr />

<h3><code>Master console</code> 不显示</h3>

<h3>解决办法：</h3>

<p>Master console 的窗口要在IPL 之前就打开 否则无法显示内容</p>

<hr />

<h3><code>Master console</code>显示：<code>*IRA200E AUXILIARY STORAGE SHORTAGE</code>, 并且登陆‘L TSO’显示：<code>IKT00203I ADDRESS SPACE CREATION FAILED</code></h3>

<h3>解决办法：</h3>

<p>原因是Page Dataset空间不够，可试试增大hercules.cnf中的MAINSIZE</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">D</span> <span class="n">ASM</span>
</span></code></pre></td></tr></table></div></figure>


<p>查看page dataset使用情况  （Local Page Dataset 在70%以下才可以登录TSO.<br/>
为系统增加page。
PAGE DATASET在IPL的PARMLIB下SYS1.PARMLIB(IEASYS00)，Z/os1.9的是在ADCD.Z19.PARMLIB。<br/>
参照链接：<a href="http://blog.sina.com.cn/s/blog_6c45bc400100x1uf.html%0Ahttp://fandezhi.efglobe.com/modules.php?name=Forums&amp;file=viewtopic&amp;t=1489&amp;highlight=SYS1.LOCAL&amp;sid=1af7e969c97a9531533932f689ac7b5c">RA200E AUXILIARY STORAGE SHORTAGE解决办法</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">妈我回来了</span></span>

      








  


<time datetime="2010-08-14T00:00:00+08:00" pubdate data-updated="true">Aug 14<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/mainframe/'>Mainframe</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/Scripts/Automation/Watir%E7%99%BB%E9%99%86%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97.html" title="Previous Post: Watir登陆谷歌搜索关键字">&laquo; Watir登陆谷歌搜索关键字</a>
      
      
        <a class="basic-alignment right" href="/Scripts/Automation/Watir%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86.html" title="Next Post: Watir设置代理">Watir设置代理 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
 <h1> About Me </h1>
    <li> <img src="/images/Do_Not_Save_Me_Cos_I_Am_Looking_At_You.png" width="175" height="225"> </li>
    <li> 介绍:  85后 爱动物 爱自由 电子通信科班出身 初级Mainframer 小米农 热衷Web安全 看好移动安全的未来 </li>
    <li> 邮箱: 54xiaowoniu@sina.cn  </li> 
    <li> 坐标: FZ=>NJ=>HZ=><font color="#ff00ff">BJ</font>=>? ... ? =>FZ ?</li>
    <li> 自评: 活得随心所欲 放荡不羁 毫无计划(参考Location) 不可托付 </li>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/Trivial/%E5%85%B3%E4%BA%8EMAC%E4%B8%8B%E7%94%A8SSH%E7%BF%BB%E5%A2%99%E7%9A%84%E5%B0%8F%E5%A7%90%28%E8%BD%AC%29.html">关于MAC下用SSH翻墙的小结(转)</a>
      </li>
    
      <li class="post">
        <a href="/Trivial/heroku+push+timeout%E9%94%99%E8%AF%AF.html">heroku push timeout错误</a>
      </li>
    
      <li class="post">
        <a href="/Mainframe/%E7%94%A8INTRDR%E5%9C%A8job%E5%BD%93%E4%B8%ADsubmit%E7%AC%AC%E4%BA%8C%E4%B8%AAjob.html">用INTRDR在job中submit第二个job</a>
      </li>
    
      <li class="post">
        <a href="/Mainframe/Mainframer%E7%89%88%E6%9C%AC%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%8C%BF%E5%90%90%E6%A7%BD.html">Mainframer版本的程序猿吐槽</a>
      </li>
    
      <li class="post">
        <a href="/Mainframe/ISPF%E4%B8%AD%E4%BD%BF%E7%94%A8Ctrl%2BZ%E6%9D%A5%E6%89%A7%E8%A1%8CUNDO%E5%91%BD%E4%BB%A4.html">ISPF中使用Ctrl+Z来执行UNDO命令</a>
      </li>
    
      <li class="post">
        <a href="/Mainframe/%E6%AF%8F%E5%A4%A9%E5%AE%9A%E6%97%B6%E4%BB%8EMainframe%E4%B8%8B%E8%BD%BDgdg%E6%96%87%E4%BB%B6%E5%86%8D%E4%B8%8A%E4%BC%A0%E5%88%B0ftp.html">每天定时从Mainframe下载gdg文件再上传到ftp</a>
      </li>
    
      <li class="post">
        <a href="/Scripts/Automation/BAT%E6%89%B9%E5%A4%84%E7%90%86%E7%8E%B0%E5%AD%A6%E7%8E%B0%E7%94%A8.html">BAT批处理现学现用</a>
      </li>
    
      <li class="post">
        <a href="/Scripts/Automation/VB+Script%E7%8E%B0%E5%AD%A6%E7%8E%B0%E7%94%A8.html">VB Script现学现用</a>
      </li>
    
      <li class="post">
        <a href="/Mainframe/mainframe%E5%B9%B3%E5%8F%B0%E6%8A%A5%E8%A1%A8%E8%87%AA%E5%8A%A8%E5%8C%96%E6%96%B9%E6%A1%88%E5%AE%9E%E7%8E%B0.html">mainframe平台报表自动化方案实现</a>
      </li>
    
      <li class="post">
        <a href="/Mainframe/IKJEFT01%E2%80%94JCL%E4%B8%AD%E6%89%A7%E8%A1%8CSQL%E8%AF%AD%E5%8F%A5.html">JCL中执行如何SQL</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/backtrack/'>BackTrack (11)</a></li>
<li class='category'><a href='/blog/categories/linux-unix/'>Linux/Unix (8)</a></li>
<li class='category'><a href='/blog/categories/mainframe/'>Mainframe (84)</a></li>
<li class='category'><a href='/blog/categories/scripts-automation/'>Scripts/Automation (16)</a></li>
<li class='category'><a href='/blog/categories/trivial/'>Trivial (17)</a></li>

  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mainframer">@mainframer</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mainframer',
            count: 1,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
 <h1> Linkedin Page </h1>
 <a href="http://www.linkedin.com/in/mainframer">@mainframer</a> on Linkedin
</section>
<section>
 <h1> License </h1>
   <p><img src="/images/CC.png"></p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - 妈我回来了 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
